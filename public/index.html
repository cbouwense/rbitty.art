<!doctype html>
<html>
<head>
  <title>Rachel Bitner Art</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
  <meta name="description" content="">
  <meta name="keywords" content="">
  <link rel="stylesheet" href="main.css" />
  <link rel="stylesheet" href="loading.css" />
  <script src="//unpkg.com/alpinejs" defer></script>
  <script type="text/javascript">
    const goToDetailPage = (page) => {
      window.location = `${window.location.href}pieces/${page}`;
    }

    const hideLoader = () => {
      document
        .getElementById('loading-screen')
        .style
        .visibility = "hidden";
    }

    const addFadeClassToArt = () => {
      const art = document.getElementsByClassName('art');
      for (let i = 0; i < art.length; i++) {
        art[i].classList.add('fadeIn');
      }
    }

    const showArt = () => {
      addFadeClassToArt();

      document
        .getElementById('art-gallery')
        .style
        .visibility = "visible";
    }
    
    const loadPage = () => {
      setTimeout(() => {
        hideLoader();
        showArt();
        console.log('done!');
      }, 1);
    }

    loadPage();
  </script>
</head>
<body>
  <nav>
    <img src="static/logo.svg">
  </nav>
  <div id="loading-screen">
    <div class="lds-ripple"><div></div><div></div></div>
  </div>
  <main 
    id="art-gallery"
    x-data="{ skus: [] }"
    x-init="skus = await (await fetch(`${window.location.origin}/.netlify/functions/get-skus`)).json()"
  >
    <template x-for="sku in skus">
      <img @click="goToDetailPage(sku)" x-bind:src="`static/${sku}.jpeg`" class="art" />
    </template>
  </main>
</body>
</html>
